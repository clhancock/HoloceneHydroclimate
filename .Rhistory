geom_polygon(data = hulls, alpha = 0.5) +
scale_fill_manual(values=c('#1D6996','#0F8554','#6F4070','#CC503E','#EDAD08'))+
scale_shape_manual(values=c(24,25,23,21,22))+
theme_bw()+
labs(y='% of Proxy Records With Common Sign of 6-0 ka Anomaly',x='Absolute Value of Simulated 6-0 ka Anomalies (mm/day)')+
theme(legend.position = 'bottom',
legend.title = element_blank(),
text = element_text(family=figFont,size=figText),
plot.margin = unit(c(0.1, 0.1, 0.1, 0.1), "in"),
legend.key.height=unit(0.15,"in"),
legend.key.width=unit(0.15,"in"),
legend.background	= element_rect(fill='white',color='black'))+
guides(fill = guide_legend(ncol = 2))
proxyMapRegions <- basemap +
#Add refrence regions boundaries
geom_map(data=regionsSelect$composite, map=dataTable, alpha=0.75, size=0.1, color='black' ,
aes(x=long, y=lat, group=group, map_id=id,fill=as.factor(dataTable$regType))) +
scale_fill_manual(values=c('#0F8554','#1D6996','#6F4070','#CC503E','#EDAD08'),)+
#Add proxy sites
geom_point(data=as.data.frame(proxyDf), aes(x=lonsPrj , y=latsPrj), shape=1,size=0.5,stroke=0.3) +
#Format Legend
theme(plot.background = element_rect(fill = NA,color=NA),
plot.margin = unit(c(0.1, 0.1, 0.1, 0.1), "in"),
legend.position = 'none')
z <- ggdraw(ggplot() + theme(plot.background= element_rect(colour='White',fill='White'),
panel.background = element_rect(colour='White',fill='White')))+
draw_plot(scatter,  x = 0,   y = 0, width = 1, height = 0.65)+
draw_plot(proxyMapRegions,  x = 0.05,   y = 0.62, width = 0.95, height = 0.4)
if (save) {
ggsave(plot=z, width = 3.25, height = 4.5, dpi = 600,
filename = file.path(dir,"Figures","Model",'ProxyAgreeByModelAnom.png'))
}
refregions
ncsd <- highlight_key(sf::st_as_sf(refregions))
map <- plot_ly(ncsd, split = ~Name,color = I("gray"), hoveron = "fills") %>%
highlight(persistent = TRUE, color = "red", opacityDim = 1) %>%
layout(title = "Click on counties to query them", showlegend = FALSE) %>%
config(displayModeBar = FALSE)
newTable <- DT::datatable(ncsd)
replaceTable <- newTable[["x"]][["data"]][,c('Acronym','Name')]
names(replaceTable) <- c('Acronym','Composite')
replaceTable$Acronym <- as.character(replaceTable$Acronym)
replaceTable$Composite <- as.character(replaceTable$Composite)
for (reg in as.character(replaceTable$Acronym)){
img <- readPNG(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
replaceTable[which(replaceTable$Acronym==reg),'Composite'] <- img
}
newTable <- DT::datatable(ncsd)
ncsd <- highlight_key(sf::st_as_sf(refregions))
map <- plot_ly(ncsd, split = ~Name,color = I("gray"), hoveron = "fills") %>%
highlight(persistent = TRUE, color = "red", opacityDim = 1) %>%
layout(title = "Click on counties to query them", showlegend = FALSE) %>%
config(displayModeBar = FALSE)
map
newTable <- DT::datatable(ncsd)
replaceTable <- newTable[["x"]][["data"]][,c('Acronym','Name')]
newTable <- DT::datatable(ncsd)
replaceTable <- newTable[["x"]][["data"]][,c('Acronym','Name')]
names(replaceTable) <- c('Acronym','Composite')
replaceTable$Acronym <-
newTable <- DT::datatable(ncsd)
replaceTable <- newTable[["x"]][["data"]][,c('Acronym','Name')]
names(replaceTable) <- c('Acronym','Composite')
replaceTable$Acronym <- as.character(replaceTable$Acronym)
replaceTable$Composite <- as.character(replaceTable$Composite) as.character(replaceTable$Acronym)
replaceTable$Composite <- as.character(replaceTable$Composite)
for (reg in as.character(replaceTable$Acronym)){
img <- readPNG(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
replaceTable[which(replaceTable$Acronym==reg),'Composite'] <- img
}
replaceTable
bscols(map, DT::datatable(ncsd))
map <- plot_ly(ncsd, split = ~Name,color = I("gray"), hoveron = "fills") %>%
highlight(persistent = TRUE, color = "red", opacityDim = 1) %>%
layout(title = "Click on counties to query them", showlegend = FALSE) %>%
config(displayModeBar = FALSE)
DT::datatable(ncsd)
newTable <- DT::datatable(ncsd)
replaceTable <- newTable[["x"]][["data"]][,c('Acronym','Name')]
names(replaceTable) <- c('Acronym','Composite')
replaceTable$Acronym <- as.character(replaceTable$Acronym)
replaceTable$Composite <- as.character(replaceTable$Composite)
newTable[["x"]][["data"]] <- replaceTable
bscols(map, DT::datatable(ncsd))
library(ggplot2)
library(leaflet)
library(plotly)
library(plotly)
library(crosstalk)
#dir  <- getwd()# '/Volumes/GoogleDrive/My Drive/zResearch/Manuscript/HoloceneHydroclimate/HoloceneHydroclimate' #
#nc <- sf::st_read(system.file("shape/nc.shp", package = "sf"), quiet = TRUE)
#bscols(map, DT::datatable(ncsd))
PROJ <- '+proj=robin   +ellps=WGS84 +datum=WGS84 +no_defs +lon_0=0 +x_0=0 +y_0=0 +units=m'
PROJorig <- "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
load(url('https://github.com/SantanderMetGroup/ATLAS/blob/main/reference-regions/IPCC-WGI-reference-regions-v4_R.rda?raw=true'), verbose = TRUE)
library(ggplot2)
library(leaflet)
library(plotly)
library(plotly)
library(crosstalk)
#dir  <- getwd()# '/Volumes/GoogleDrive/My Drive/zResearch/Manuscript/HoloceneHydroclimate/HoloceneHydroclimate' #
#nc <- sf::st_read(system.file("shape/nc.shp", package = "sf"), quiet = TRUE)
#bscols(map, DT::datatable(ncsd))
PROJ <- '+proj=robin   +ellps=WGS84 +datum=WGS84 +no_defs +lon_0=0 +x_0=0 +y_0=0 +units=m'
PROJorig <- "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
#load(url('https://github.com/SantanderMetGroup/ATLAS/blob/main/reference-regions/IPCC-WGI-reference-regions-v4_R.rda?raw=true'), verbose = TRUE)
refregions <-  spTransform(IPCC_WGI_reference_regions_v4, CRSobj = PROJ)
ncsd <- highlight_key(sf::st_as_sf(refregions))
map <- plot_ly(ncsd, split = ~Name,color = I("gray"), hoveron = "fills") %>%
highlight(persistent = TRUE, color = "red", opacityDim = 1) %>%
layout(title = "Click on counties to query them", showlegend = FALSE) %>%
config(displayModeBar = FALSE)
newTable <- DT::datatable(ncsd)
replaceTable <- newTable[["x"]][["data"]][,c('Acronym','Name')]
names(replaceTable) <- c('Acronym','Composite')
replaceTable$Acronym <- as.character(replaceTable$Acronym)
replaceTable$Composite <- as.character(replaceTable$Composite)
newTable[["x"]][["data"]] <- replaceTable
bscols(map, DT::datatable(ncsd))
library(ggplot2)
library(leaflet)
library(plotly)
library(plotly)
library(crosstalk)
#dir  <- getwd()# '/Volumes/GoogleDrive/My Drive/zResearch/Manuscript/HoloceneHydroclimate/HoloceneHydroclimate' #
#nc <- sf::st_read(system.file("shape/nc.shp", package = "sf"), quiet = TRUE)
#bscols(map, DT::datatable(ncsd))
PROJ <- '+proj=robin   +ellps=WGS84 +datum=WGS84 +no_defs +lon_0=0 +x_0=0 +y_0=0 +units=m'
PROJorig <- "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
#load(url('https://github.com/SantanderMetGroup/ATLAS/blob/main/reference-regions/IPCC-WGI-reference-regions-v4_R.rda?raw=true'), verbose = TRUE)
refregions <-  spTransform(IPCC_WGI_reference_regions_v4, CRSobj = PROJ)
ncsd <- highlight_key(sf::st_as_sf(refregions))
map <- plot_ly(ncsd, split = ~Name,color = I("gray"), hoveron = "fills") %>%
highlight(persistent = TRUE, color = "red", opacityDim = 1) %>%
layout(title = "Click on counties to query them", showlegend = FALSE) %>%
config(displayModeBar = FALSE)
newTable <- DT::datatable(ncsd)
replaceTable <- newTable[["x"]][["data"]][,c('Acronym','Name')]
names(replaceTable) <- c('Acronym','Composite')
replaceTable$Acronym <- as.character(replaceTable$Acronym)
replaceTable$Composite <- as.character(replaceTable$Composite)
newTable[["x"]][["data"]] <- replaceTable
bscols(map, DT::datatable(ncsd))
PROJ <- '+proj=robin   +ellps=WGS84 +datum=WGS84 +no_defs +lon_0=0 +x_0=0 +y_0=0 +units=m'
PROJorig <- "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
#load(url('https://github.com/SantanderMetGroup/ATLAS/blob/main/reference-regions/IPCC-WGI-reference-regions-v4_R.rda?raw=true'), verbose = TRUE)
refregions <-  spTransform(IPCC_WGI_reference_regions_v4, CRSobj = PROJ)
ncsd <- highlight_key(sf::st_as_sf(refregions))
map <- plot_ly(ncsd, split = ~Name,color = I("gray"), hoveron = "fills") %>%
highlight(persistent = TRUE, color = "red", opacityDim = 1) %>%
layout(title = "Click on counties to query them", showlegend = FALSE) %>%
config(displayModeBar = FALSE)
newTable <- DT::datatable(ncsd)
replaceTable <- newTable[["x"]][["data"]][,c('Acronym','Name')]
names(replaceTable) <- c('Acronym','Composite')
replaceTable$Acronym <- as.character(replaceTable$Acronym)
replaceTable$Composite <- as.character(replaceTable$Composite)
newTable[["x"]][["data"]] <- replaceTable
bscols(map, DT::datatable(ncsd))
newTable[["x"]][["data"]] <- replaceTable
bscols(map, DT::datatable(ncsd))
newTable[["x"]][["data"]][,c('Acronym','Name')]
newTable <- DT::datatable(ncsd)
newTable[["x"]][["data"]][,c('Acronym','Name')]
newTable <- DT::datatable(ncsd)
replaceTable <- newTable[["x"]][["data"]][,c('Acronym','Name')]
replaceTable
names(replaceTable) <- c('Acronym','Composite')
replaceTable$Acronym <- as.character(replaceTable$Acronym)
replaceTable$Composite <- as.character(replaceTable$Composite)
newTable[["x"]][["data"]] <- replaceTable
newTable[["x"]][["data"]]
readPNG(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
readPNG(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
xfun::download_file(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
xfun::download_file("https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png"
)
sprintf('![](%s)', "https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png")
z<-sprintf('![](%s)', xfun::download_file("https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png"))
z
knitr::opts_chunk$set(echo = TRUE)
#devtools::install_github("rstudio/leaflet#346")
rgb(readPNG(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png")))
img<-rgb(readPNG(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png")))
img<-readPNG(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
imgRgb <- rgb(img[,,1],img[,,2],img[,,3])
img<-readPNG(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
imgRgb <- rgb(img[,,1],img[,,2],img[,,3])
imgRgb
img<-readPNG(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
imgRgb <- rgb(img[,,1],img[,,2],img[,,3])
flags <- replicate(1, rasterGrob(imgRgb), simplify = FALSE)
flags <- replicate(3, rasterGrob(imgRgb), simplify = FALSE)
library(grid)
img<-readPNG(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
imgRgb <- rgb(img[,,1],img[,,2],img[,,3])
flags <- replicate(3, rasterGrob(imgRgb), simplify = FALSE)
g <- gtable_add_cols(g, unit(1,"cm"), 0)
library(gtable)
img<-readPNG(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
imgRgb <- rgb(img[,,1],img[,,2],img[,,3])
flags <- replicate(3, rasterGrob(imgRgb), simplify = FALSE)
g <- gtable_add_cols(g, unit(1,"cm"), 0)
library(gtable)
g <- gtable_table(replaceTable)
library(gtable)
require(gtable)
g <- gtable_table(replaceTable)
library(gtable)
library(gridExtra)
g <- gtable_table(replaceTable)
library(gtable)
library(tableExtra)
library(gtable)
library(gridExtra)
g <- gtable_table(replaceTable)
x = rnorm(1000)
png(paste0("Graficas/test.png"))
Plot = plot(x, type = "l")
dev.off()
png(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
x = rnorm(1000)
z<-png(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
Plot = plot(x, type = "l")
dev.off()
camino = z
data = data.frame(0.5,camino)
png(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
?png
x = rnorm(1000)
png(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
Plot = plot(x, type = "l")
dev.off()
Plot = plot(x, type = "l")
Plot = plot(x, type = "l")
?plot
local_image(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
library(gt)
install.packages("gt")
local_image(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
gt::local_image(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
install.packages("dplyr")
gt::local_image(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
library(dplyr)
gt::local_image(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
install.packages("dplyr")
detach("package:dplyr", unload = TRUE)
library(dplyr)
detach("package:dplyr", unload = TRUE)
library(dplyr)
gt::local_image(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
library(tidyverse)
library(magick)
library(tesseract)
install.packages("tesseract")
install.packages("tesseract")
library(tesseract)
install.packages("tesseract")
library(tesseract)
imgDir<- file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png")
raw_img <- image_read(imgDir)
image_ggplot(raw_img)
imgDir<- file.path("https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png")
raw_img <- image_read(imgDir)
library(tidyverse)
library(magick)
library(tesseract)
imgDir<- file.path("https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png")
raw_img <- image_read(imgDir)
image_ggplot(raw_img)
for (reg in as.character(replaceTable$Acronym)){
imgDir<- file.path("https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png")
replaceTable[which(replaceTable$Acronym==reg),'Composite'] <- image_ggplot( image_read(imgDir))
}
for (reg in as.character(replaceTable$Acronym)){print(reg)}
for (reg in as.character(replaceTable$Acronym)){
imgDir<- file.path("https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png")}
replaceTable[which(replaceTable$Acronym==reg),'Composite']
image_ggplot( image_read(imgDir))
class(image_ggplot( image_read(imgDir)))
replaceTable[which(replaceTable$Acronym==reg),'Composite'] <- image_ggplot( image_read(imgDir))
replaceTable$Composite
replaceTable$Composite <- rep(image_ggplot( image_read(imgDir)),58)
replaceTable$Composite <- rep(image_ggplot( image_read(imgDir)),522)
replaceTable$Composite
class(replaceTable$Composite)
rep(image_ggplot( image_read(imgDir)),58)
sprintf(image_ggplot( image_read(imgDir)))
sprintf(image_ggplot( image_read(imgDir)),reg)
as.character(image_ggplot( image_read(imgDir)))
sprintf(as.character(image_ggplot( image_read(imgDir))),reg)
class(as.character(image_ggplot( image_read(imgDir))))
class(image_ggplot( image_read(imgDir)))
library(imager)
install.packages("imager")
load.image(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
imager::load.image(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
imager::load.image(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
class(imager::load.image(file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png"))
)
for (reg in as.character(replaceTable$Acronym)){
imgDir<- file.path("https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png")
#replaceTable[which(replaceTable$Acronym==reg),'Composite'] <- image_ggplot( image_read(imgDir))
replaceTable[which(replaceTable$Acronym==reg),'Composite'] <- imager::load.image(imgDir)
}
newTable <- DT::datatable(ncsd)
newTable <- DT::datatable(ncsd)
replaceTable <- newTable[["x"]][["data"]][,c('Acronym','Name')]
names(replaceTable) <- c('Acronym','Composite')
replaceTable$Acronym <- as.character(replaceTable$Acronym)
replaceTable$Composite <- as.character(replaceTable$Composite)
library(tidyverse)
library(magick)
library(tesseract)
for (reg in as.character(replaceTable$Acronym)){
imgDir<- file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png")
#replaceTable[which(replaceTable$Acronym==reg),'Composite'] <- image_ggplot( image_read(imgDir))
replaceTable[which(replaceTable$Acronym==reg),'Composite'] <- imager::load.image(imgDir)
}
imager::load.image(imgDir)
dim(imager::load.image(imgDir))
class(imager::load.image(imgDir))
imager::load.image(imgDir)%>% plot
replaceTable[which(replaceTable$Acronym==reg),'Composite'] <- image_ggplot( image_read(imgDir))
image_ggplot( image_read(imgDir))
image_ggplot( image_read(imgDir))
imgDir<- file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png")
image_ggplot( image_read(imgDir))
image_ggplot( image_read(imgDir))
imgDir<- file.path("https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png")
image_ggplot( image_read(imgDir))
image_ggplot( image_read(imgDir))
replaceTable[which(replaceTable$Acronym==reg),'Composite'] <- image_ggplot( image_read(imgDir))
np.shape( image_ggplot( image_read(imgDir)))
dim( image_ggplot( image_read(imgDir)))
View( image_ggplot( image_read(imgDir)))
sprintf(![]imgDir)
sprintf("![]https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png")
```{r results='asis'}
dat <- data.frame(
country = c('Canada', 'United Kindom'),
abbr = c('ca', 'gb'),
var1 = c(1, 2),
var2 = rnorm(2)
)
dat$flag <- sprintf('![](http://flagpedia.net/data/flags/mini/%s.png)', dat$abbr)
library(knitr)
kable(dat)
class(dat$flag)
dat$flag <- sprintf('![]("https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png")', dat$abbr)
library(knitr)
kable(dat)
dat$flag
dat$flag <- sprintf('![](file.path(dir,"Figures","RegionComposites","HC","59_NZ_Composite.png")))', dat$abbr)
library(knitr)
kable(dat)
dat$flag <- sprintf('![]("https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/%s.png")', "59_NZ_Composite")
library(knitr)
library(knitr)
dat <- data.frame(
country = c('Canada', 'United Kindom'),
abbr = c('ca', 'gb'),
var1 = c(1, 2),
var2 = rnorm(2)
)
dat$flag <- sprintf('![]("https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/%s.png")', "59_NZ_Composite")
kable(dat)
dat$flag <- sprintf('![](imager::load.image(imgDir)")
library(knitr)
dat <- data.frame(
country = c('Canada', 'United Kindom'),
library(knitr)
dat <- data.frame(
country = c('Canada', 'United Kindom'),
abbr = c('ca', 'gb'),
var1 = c(1, 2),
var2 = rnorm(2)
)
dat$flag <- sprintf('![](imager::load.image(imgDir)')
kable(dat)
dat$flag <- sprintf('![](http://flagpedia.net/data/flags/mini/%s.png)', dat$abbr)
kable(dat)
view(dat$flag)
dat <- data.frame(
country = c('Canada', 'United Kindom'),
abbr = c('ca', 'gb'),
var1 = c(1, 2),
var2 = rnorm(2)
)
dat$flag <- sprintf('![](imager::load.image(imgDir)')
kable(dat)
class(dat$flag)
readImage(imgDir)
EBImage::readImage(imgDir)
library(knitr)
dat <- data.frame(
country = c('Canada', 'United Kindom'),
abbr = c('ca', 'gb'),
var1 = c(1, 2),
var2 = rnorm(2)
)
dat$flag <- sprintf('https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png')
kable(dat)
library(knitr)
dat <- data.frame(
country = c('Canada', 'United Kindom'),
abbr = c('ca', 'gb'),
var1 = c(1, 2),
var2 = rnorm(2)
)
dat$flag <- sprintf('![](https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png)')
kable(dat)
library(ggplot2)
library(leaflet)
library(plotly)
library(plotly)
library(crosstalk)
#dir  <- getwd()# '/Volumes/GoogleDrive/My Drive/zResearch/Manuscript/HoloceneHydroclimate/HoloceneHydroclimate' #
#nc <- sf::st_read(system.file("shape/nc.shp", package = "sf"), quiet = TRUE)
#bscols(map, DT::datatable(ncsd))
PROJ <- '+proj=robin   +ellps=WGS84 +datum=WGS84 +no_defs +lon_0=0 +x_0=0 +y_0=0 +units=m'
PROJorig <- "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
#load(url('https://github.com/SantanderMetGroup/ATLAS/blob/main/reference-regions/IPCC-WGI-reference-regions-v4_R.rda?raw=true'), verbose = TRUE)
refregions <-  spTransform(IPCC_WGI_reference_regions_v4, CRSobj = PROJ)
ncsd <- highlight_key(sf::st_as_sf(refregions))
map <- plot_ly(ncsd, split = ~Name,color = I("gray"), hoveron = "fills") %>%
highlight(persistent = TRUE, color = "red", opacityDim = 1) %>%
layout(title = "Click on counties to query them", showlegend = FALSE) %>%
config(displayModeBar = FALSE)
newTable <- DT::datatable(ncsd)
replaceTable <- newTable[["x"]][["data"]][,c('Acronym','Name')]
names(replaceTable) <- c('Acronym','Composite')
replaceTable$Acronym <- as.character(replaceTable$Acronym)
replaceTable$Composite <-sprintf('![](https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png)')
newTable[["x"]][["data"]] <- replaceTable
bscols(map, DT::datatable(ncsd))
newTable <- DT::datatable(ncsd)
replaceTable <- newTable[["x"]][["data"]][,c('Acronym','Name')]
names(replaceTable) <- c('Acronym','Composite')
replaceTable$Acronym <- as.character(replaceTable$Acronym)
replaceTable$Composite <-sprintf('![](https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png)')
newTable[["x"]][["data"]] <- replaceTable
bscols(map, DT::datatable(ncsd))
newTable <- DT::datatable(ncsd)
replaceTable <- newTable[["x"]][["data"]][,c('Acronym','Name')]
names(replaceTable) <- c('Acronym','Composite')
replaceTable$Acronym <- as.character(replaceTable$Acronym)
replaceTable$Composite <-sprintf('![](https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png)')
newTable[["x"]][["data"]] <- replaceTable
bscols(map, DT::datatable(ncsd))
replaceTable
replaceTable$Composite
bscols(map, kable(DT::datatable(ncsd)))
bscols(map, DT::datatable(ncsd))
kable(replaceTable)
knitr::opts_chunk$set(echo = TRUE)
#devtools::install_github("rstudio/leaflet#346")
kable(replaceTable)
newTable <- DT::datatable(ncsd)
replaceTable <- newTable[["x"]][["data"]][,c('Acronym','Name')]
names(replaceTable) <- c('Acronym','Composite')
replaceTable$Acronym <- as.character(replaceTable$Acronym)
replaceTable$Composite <-sprintf('![](https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png)')
newTable[["x"]][["data"]] <- kable(replaceTable)
bscols(map, DT::datatable(ncsd))
bscols(map, DT::datatable(ncsd))
newTable <- DT::datatable(ncsd)
ncsd <- highlight_key(sf::st_as_sf(refregions))
newTable <- DT::datatable(ncsd)
replaceTable <- newTable[["x"]][["data"]][,c('Acronym','Name')]
names(replaceTable) <- c('Acronym','Composite')
replaceTable$Acronym <- as.character(replaceTable$Acronym)
replaceTable$Composite <-sprintf('![](https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png)')
newTable[["x"]][["data"]]
newTable[["x"]][["data"]] <- kable(replaceTable)
newTable[["x"]][["data"]]
bscols(map, DT::datatable(ncsd))
newTable[["x"]][["data"]]
bscols(map, newTable)
class(bscols(map, newTable)
)
save_html(bscols(map, newTable),file.path(dir,"Figures","test.html") # Produces HTML with external dependencies
)
save_html(bscols(map, newTable),file.path(dir,"Figures","test.html") )# Produces HTML with external dependencies
library(sf)
library(leaflet)
library(htmltools)
library(mapview)
save_html(bscols(map, newTable),file.path(dir,"Figures","test.html") )# Produces HTML with external dependencies
kable(replaceTable)
bscols(map, newTable)
newTable
newTable
newTable
ncsd <- highlight_key(sf::st_as_sf(refregions))
newTable <- DT::datatable(ncsd)
replaceTable <- newTable[["x"]][["data"]][,c('Acronym','Name')]
names(replaceTable) <- c('Acronym','Composite')
replaceTable$Acronym <- as.character(replaceTable$Acronym)
replaceTable$Composite <-sprintf('![](https://raw.githack.com/clhancock/HoloceneHydroclimate/main/Figures/RegionComposites/HC/59_NZ_Composite.png)')
newTable[["x"]][["data"]] <- kable(replaceTable)
bscols(map, newTable)
save_html(bscols(map, newTable),file.path(dir,"Figures","test.html") )# Produces HTML with external dependencies
newTable
bscols(map, newTable)
newTable[["x"]][["data"]] <- replaceTable# kable(replaceTable)
bscols(map, newTable)
kable(replaceTable)
bscols(map, kable(replaceTable))
save_html(bscols(map, kable(replaceTable)),file.path(dir,"Figures","test.html") )# Produces HTML with external dependencies
class(kable(replaceTable))
print(!)
